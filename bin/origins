#!/usr/bin/env python
# vim:ft=python

"""Origins CLI

Usage:
    origins serve [--debug] [--config PATH]
    origins events [--debug] [--config PATH]

Options:
    -h --help           Show this screen.
    -v --version        Show version.
    --debug             Turns on debugging.
    --config PATH       Specify path to configuration.
"""

import sys
from docopt import docopt
from origins import config


cli_options = docopt(__doc__, version='Origins 0.1.0')


# Load options
if cli_options['--config']:
    try:
        config.load_options(cli_options['--config'])
    except Exception:
        sys.exit(1)


# Set debug; common enough to support override
if cli_options['--debug']:
    config.options['debug'] = cli_options['--debug']


# Execute passed command
if cli_options['serve']:
    from origins.service import server

    server.serve()
elif cli_options['events']:
    from origins.events import server

    server.serve()
